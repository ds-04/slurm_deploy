# slurm.conf file generated by configurator.html.
# Put this file on all nodes of your cluster.
# See the slurm.conf man page for more information.
#
ClusterName=local
SlurmctldHost={{ ansible_hostname }}
ProctrackType=proctrack/cgroup
ReturnToService=1
SlurmctldPidFile=/var/run/slurmctld.pid
SlurmctldPort=6817
SlurmdPidFile=/var/run/slurmd.pid
SlurmdPort=6818
SlurmdSpoolDir=/var/spool/slurmd
SlurmUser=slurm
StateSaveLocation=/var/spool/slurmctld
TaskPlugin=task/affinity,task/cgroup
#
# TIMERS
InactiveLimit=0
KillWait=30
MinJobAge=300
SlurmctldTimeout=120
SlurmdTimeout=300
Waittime=0
#
#
# SCHEDULING
SchedulerType=sched/backfill
SelectType=select/cons_tres
#
#
# JOB PRIORITY
#PriorityFlags=
#
#
# LOGGING AND ACCOUNTING
AccountingStorageType=accounting_storage/slurmdbd
#AccountingStorageEnforce=0
AccountingStorageHost={{ ansible_fqdn }}
AccountingStoragePort=6819
#AccountingStorageType=
AccountingStorageUser=slurm
#AccountingStoreFlags=
#JobCompHost=
#JobCompLoc=
#JobCompParams=
#JobCompPort=
JobCompType=jobcomp/none
#JobCompUser=
#JobContainerType=
JobAcctGatherFrequency=30
#JobAcctGatherType=
SlurmctldDebug=info
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdDebug=info
SlurmdLogFile=/var/log/slurm/slurmd.log
#SlurmSchedLogFile=
#SlurmSchedLogLevel=
#DebugFlags=
#
#
# Node definitions
{% if (groups['slurm_client'] | length) > 0 %}
{% for server in groups['all_slurm_hosts'] %}
NodeName={{ hostvars[server].inventory_hostname_short }} CPUs=1 State=UNKNOWN ThreadsPerCore=1 RealMemory=1000
{% endfor %}
{% else %}
NodeName=localhost CPUs=1 State=UNKNOWN ThreadsPerCore=1 RealMemory=1000
{% endif %}

# Partitions
PartitionName=debug Nodes=ALL Default=YES MaxTime=INFINITE State=UP
